function initMap(a){var e={lat:40.722216,lng:-73.987501},t=new google.maps.Map(document.getElementById("nyc-map"),{zoom:12,center:e,scrollwheel:!1});a.forEach(function(a){new google.maps.Marker({position:{lat:a.latlng.lat,lng:a.latlng.lng},map:t})})}function fetchRestaurants(){var a=$("#select-cuisine-type").val(),e=$("#select-borough").val(),t="",s=[];$.each(restaurants,function(r,i){if(!("all"!==a&&i.cuisine_type!==a||"all"!==e&&i.borough!==e)){s.push(i);var n=0,c=reviews[i.name].length;$.each(reviews[i.name],function(a,e){n+=e.rating});var l=Math.round(n/c);t+="<div class='col-md-6'><figure>",t+="<img class='img-fluid' src='./assets/images/"+i.photograph+"' alt='"+i.name+"' >",t+="<figcaption><a href='./show.html?r="+i.name.replace(/'/g,"%27")+"'>"+i.name+"</a>",t+="<p>"+"<i class='fa fa-star' aria-hidden='true'></i>".repeat(l)+"<i class='fa fa-star-o' aria-hidden='true'></i>".repeat(5-l)+"</p>",t+="<p><i class='fa fa-map-marker' aria-hidden='true'></i> "+i.address.split("$")[0]+"</p>",t+="<p><i class='fa fa-map-marker' aria-hidden='true'></i> "+i.address.split("$")[1]+"</p>",t+="<p><i class='fa fa-cutlery' aria-hidden='true'></i> "+i.cuisine_type+"</p>",t+="</figcaption></figure></div>"}}),$("#restaurants").html(t),initMap(s)}var restaurants,reviews;$(document).ready(function(){$.ajax({url:"https://fleemaja.github.io/restaurant_reviewer/data/restaurants.json",type:"GET",success:function(a){restaurants=a,$.ajax({url:"https://fleemaja.github.io/restaurant_reviewer/data/reviews.json",type:"GET",success:function(a){reviews=JSON.parse(localStorage.getItem("_restaurantReviews"))||a,fetchRestaurants()}})}}),$("#select-cuisine-type").on("change",function(){fetchRestaurants()}),$("#select-borough").on("change",function(){fetchRestaurants()})});