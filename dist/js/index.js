function initMap(a){var e={lat:40.722216,lng:-73.987501},t=new google.maps.Map(document.getElementById("nyc-map"),{zoom:12,center:e,scrollwheel:!1});a.forEach(function(a){var e=new google.maps.Marker({position:{lat:a.latlng.lat,lng:a.latlng.lng},url:window.location.href+"show.html?r="+a.name.replace(/'/g,"%27"),title:a.name,map:t});google.maps.event.addListener(e,"click",function(){window.location.href=e.url})})}function fetchRestaurants(){var a=$("#select-cuisine-type").val(),e=$("#select-borough").val(),t="",r=[];$.each(restaurants,function(n,s){if(!("all"!==a&&s.cuisine_type!==a||"all"!==e&&s.borough!==e)){r.push(s);var i=0,l=reviews[s.name].length;$.each(reviews[s.name],function(a,e){i+=e.rating});var c=Math.round(i/l);t+="<div class='col-md-6' id='"+s.photograph+"'><figure>",t+="<img class='img-fluid' src='./assets/images/"+s.photograph+"' alt='"+s.name+"' >",t+="<figcaption><a href='./show.html?r="+s.name.replace(/'/g,"%27")+"'>"+s.name+"</a>",t+="<p>"+"<i class='fa fa-star' aria-hidden='true'></i>".repeat(c)+"<i class='fa fa-star-o' aria-hidden='true'></i>".repeat(5-c)+"</p>",t+="<p><i class='fa fa-map-marker' aria-hidden='true'></i> "+s.address.split("$")[0]+"</p>",t+="<p><i class='fa fa-map-marker' aria-hidden='true'></i> "+s.address.split("$")[1]+"</p>",t+="<p><i class='fa fa-cutlery' aria-hidden='true'></i> "+s.cuisine_type+"</p>",t+="</figcaption></figure></div>"}}),$("#restaurants").html(t),initMap(r)}var restaurants,reviews;$(document).ready(function(){$.ajax({url:"https://fleemaja.github.io/restaurant_reviewer/data/restaurants.json",type:"GET",success:function(a){restaurants=a,$.ajax({url:"https://fleemaja.github.io/restaurant_reviewer/data/reviews.json",type:"GET",success:function(a){reviews=JSON.parse(localStorage.getItem("_restaurantReviews"))||a,fetchRestaurants()}})}}),$("#select-cuisine-type").on("change",function(){fetchRestaurants()}),$("#select-borough").on("change",function(){fetchRestaurants()})});