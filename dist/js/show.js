function initMap(e,t){var a={lat:e,lng:t},i=new google.maps.Map(document.getElementById("map"),{zoom:17,center:a,draggable:!1,scrollwheel:!1,panControl:!1,disableDefaultUI:!0});new google.maps.Marker({position:a,map:i});google.maps.event.addListener(i,"tilesloaded",function(e){[].slice.apply(document.querySelectorAll("#map a")).forEach(function(e){e.setAttribute("tabindex","-1")}),$(this.getDiv()).find("img").each(function(e,t){t.alt&&""!==t.alt||(t.alt="Google Maps Image")})})}function multiplyString(e,t){for(var a="",i=1;i<=t;i++)a+=e;return a}function addNewReview(){var e=$("#name-input").val(),t=getDate(),a=$("#stars").val(),i=$("#review-input").val(),s="";s+="<hr><article class='review'><p><strong>"+e+"</strong>",s+="<span class='review-date'>"+t+"</span></p>",s+="<p>"+multiplyString("<i class='fa fa-star' aria-hidden='true'></i>",a)+multiplyString("<i class='fa fa-star-o' aria-hidden='true'></i>",5-a),s+="<span class='sr-only'>Rating: "+a+" out of 5 stars</span></p>",s+="<p>"+i+"</p></article>",$(".reviews").prepend(s),$("html, body").stop(!0,!0).animate({scrollTop:$(".reviews").offset().top-90},500);var r={name:e,date:t,rating:parseInt(a),comments:i};reviews[document.title].unshift(r),localStorage._restaurantReviews=JSON.stringify(reviews),$("#name-input").val(""),$("#review-input").val("")}function getDate(){var e=new Date,t=e.getMonth(),a=e.getDate(),i=e.getFullYear();return months[t]+" "+a+", "+i}function isStarValid(){var e=$("#stars").val();return""!==e}function isNameValid(){var e=$("#name-input").val();return""!==e}function isReviewValid(){var e=$("#review-input").val();return""!==e}var restaurants,reviews,nameTooltip=$("#name-tooltip"),starTooltip=$("#star-tooltip"),reviewTooltip=$("#review-tooltip");$("form").submit(function(e){e.preventDefault();var t=!0;isStarValid()||(t=!1,starTooltip.css("visibility","visible")),isNameValid()||(t=!1,nameTooltip.css("visibility","visible")),isReviewValid()||(t=!1,reviewTooltip.css("visibility","visible")),t&&addNewReview()});var months=["January","February","March","April","May","June","July","August","September","October","November","December"];$("#stars").on("starrr:change",function(e,t){$("#stars").val(t),starTooltip.css("visibility","hidden")}),$("#name-input").focusout(function(){isNameValid()||nameTooltip.css("visibility","visible")}),$("#name-input").focusin(function(){nameTooltip.css("visibility","hidden")}),$("#review-input").focusout(function(){isReviewValid()||reviewTooltip.css("visibility","visible")}),$("#review-input").focusin(function(){reviewTooltip.css("visibility","hidden")}),$("#stars").on("keydown",function(e){var t=0;$("#stars > i").each(function(){"true"==$(this).attr("aria-checked")&&(t=parseInt($(this).attr("id").split("-")[1]))}),39==e.which?t<5&&(t+=1,$("#star-"+t).click()):37==e.which&&t>0&&(t-=1,$("#star-"+t).click())}),$(document).ready(function(){$.ajax({url:"https://fleemaja.github.io/restaurant_reviewer/data/restaurants.json",type:"GET",success:function(e){restaurants=e,$.ajax({url:"https://fleemaja.github.io/restaurant_reviewer/data/reviews.json",type:"GET",success:function(e){reviews=JSON.parse(localStorage.getItem("_restaurantReviews"))||e;var t=window.location.href,a=t.split("?r="),i=a[1];i=i.replace(/%27/g,"'").replace(/%20/g," ");var s=!1;$.each(restaurants,function(e,t){if(t.name===i){initMap(t.latlng.lat,t.latlng.lng),s=!0;var a="";a+="<article class='restaurant'><h1>"+t.name+"</h1>",a+="<img class='img-fluid' src='./assets/images/"+t.photograph+"' alt='"+t.name+"' >",a+="<div class='restaurant-info'><p><i class='fa fa-map-marker' aria-hidden='true' title='Address'></i><span class='sr-only'>Address:</span> "+t.address.split("$")[0]+"</p>",a+="<p><i class='fa fa-map-marker' aria-hidden='true' title='Address'></i> "+t.address.split("$")[1]+"</p>",a+="<p><i class='fa fa-cutlery' aria-hidden='true' title='Cuisine Type'></i><span class='sr-only'>Cuisine Type:</span> "+t.cuisine_type+"</p><hr>",a+="<p><i class='fa fa-clock-o' aria-hidden='true' title='Business Hours'></i><span class='sr-only'>Business Hours:</span></p><table>",$.each(Object.keys(t.operating_hours),function(e,i){a+="<tr><td><strong>"+i+"</strong></td><td>"+t.operating_hours[i].replace(",","<br>")+"</td></tr>"}),a+="</table></div></article>",$(".info").prepend(a);var r="";$.each(reviews[i],function(e,t){r+="<hr><article class='review'><p><strong>"+t.name+"</strong>",r+="<span class='review-date'>"+t.date+"</span></p>",r+="<p>"+multiplyString("<i class='fa fa-star' aria-hidden='true'></i>",t.rating)+multiplyString("<i class='fa fa-star-o' aria-hidden='true'></i>",5-t.rating),r+="<span class='sr-only'>Rating: "+t.rating+" out of 5 stars</span></p>",r+="<p>"+t.comments+"</p></article>"}),$(".reviews").html(r),document.title=i}}),s||(html="404",document.title="404",$(".container").append(html))}})}})});